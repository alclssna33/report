<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Daily Reports Index</title>
  <style>
    body { font-family: sans-serif; background: #f5f5f5; padding: 40px; }
    h1 { color: #333; margin-bottom: 20px; }
    .latest-box {
      padding: 20px;
      background: #e1f7e7;
      border-left: 6px solid #2ecc71;
      margin-bottom: 30px;
      border-radius: 8px;
    }
    .list-box {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #ddd;
    }
    a { color: #0077ff; text-decoration: none; }
    a:hover { text-decoration: underline; }
    ul { line-height: 1.8; }
  </style>
</head>
<body>

<h1>ğŸ“Š K-Stock Daily Reports</h1>

<div class="latest-box">
  <h3>ğŸŸ¢ ìµœì‹  ë³´ê³ ì„œ</h3>
  <div id="latest"></div>
</div>

<div class="list-box">
  <h3>ğŸ“š ì „ì²´ ë³´ê³ ì„œ ëª©ë¡</h3>
  <ul id="list"></ul>
</div>

<script>
async function loadFiles() {
  // GitHub Pages rootì—ì„œ HTML íŒŒì¼ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
  const apiUrl = "https://api.github.com/repos/alclssna33/report/contents/";
  const res = await fetch(apiUrl);
  const data = await res.json();

  // HTML íŒŒì¼ë§Œ í•„í„°ë§
  const htmlFiles = data
    .filter(f => f.name.endsWith(".html") && f.name !== "index.html")
    .map(f => f.name);

  // ë‚ ì§œ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ (ë‚´ë¦¼ì°¨ìˆœ)
  htmlFiles.sort((a, b) => {
    const da = a.replace(".html", "");
    const db = b.replace(".html", "");
    return db.localeCompare(da);
  });

  // ìµœì‹  íŒŒì¼ í‘œì‹œ
  const latest = htmlFiles[0];
  document.getElementById("latest").innerHTML =
    `<a href="./${latest}" target="_blank">ğŸ“„ ${latest}</a>`;

  // ì „ì²´ ë¦¬ìŠ¤íŠ¸ í‘œì‹œ
  const list = htmlFiles
    .map(f => `<li><a href="./${f}" target="_blank">${f}</a></li>`)
    .join("");

  document.getElementById("list").innerHTML = list;
}

loadFiles();
</script>

</body>
</html>
